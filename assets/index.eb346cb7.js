(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class u extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML=`
    <nav class="shadow-md bg-blue-500 p-4 text-white d-flex justify-content-between font-bold ${this.getAttribute("class")}">
      <h1 class="text-2xl">N Body 2D</h1>
    </nav>
    `}}customElements.define("app-bar",u);class a{constructor(t=0,e=0){this.x=t,this.y=e}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){return new a(this.x/this.magnitude,this.y/this.magnitude)}equals(t){return this.x==t.x&&this.y==t.y}add(t){this.x+=t.x,this.y+=t.y}distanceTo(t){const e=new a;return e.x=Math.abs(t.x-this.x),e.y=Math.abs(t.y-this.y),e.magnitude}multiplyScalar(t){this.x*=t,this.y*=t}}const d={G:66743e-15,massScale:1/1e14};function c(o=0,t=1){return Math.random()*(t-o)+o}function l(o){return d.massScale*o}class h{constructor(t){this.position=t!=null?t:new a,this.velocity=new a,this.mass=l(5972e21)}move(t=[]){this.position.add(this.velocity),this.potentialEnergy=0,t.forEach(e=>{if(this.position.equals(e.position)||this.position.distanceTo(e.position)<5)return;const n=this.position.distanceTo(e.position),s=new a(e.position.x-this.position.x,e.position.y-this.position.y).normalized,i=d.G*e.mass/(n*n);s.multiplyScalar(i),this.velocity.add(s)})}}class p extends HTMLElement{constructor(){super();const t=document.createElement("div");t.setAttribute("class","border border-slate-300 rounded p-4 m-5 max-w-md mx-auto"),this.canvas=document.createElement("canvas"),this.canvas.setAttribute("class","border mx-auto"),this.canvas.width=350,this.canvas.height=350,this.ctx=this.canvas.getContext("2d"),t.appendChild(this.canvas);const e=document.createElement("div");e.setAttribute("class","flex justify-evenly items-center w-full mt-4"),e.innerHTML=`
    <button type="button" class="py-2 px-4 rounded border-none bg-blue-500 text-white focus:bg-blue-700 w-1/3" id="replay-button">Run With</button>
    <input type="number" id="bodies-count" name="Bodies Count" aria-labelledby="replay-button" class="p-2 rounded border focus:outline focus:outline-blue-700 w-1/3" value="100">
    <span class="w-16">Bodies</span>
    `,t.appendChild(e);const n=e.querySelector("#replay-button"),s=e.querySelector("#bodies-count");n.addEventListener("click",()=>this.generateBodies(s.value)),s.addEventListener("change",()=>this.generateBodies(s.value)),this.appendChild(t),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.generateBodies()}generateBodies(t=100){this.bodies=[];for(let e=0;e<t;e++){const n=new h;n.position.x=c(0,this.canvasWidth),n.position.y=c(0,this.canvasHeight),n.mass=c(l(7347e19),l(5972e21)),this.bodies.push(n)}}connectedCallback(){this.draw()}draw(){requestAnimationFrame(()=>this.draw()),this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(const t of this.bodies)this.drawBody(t),t.move(this.bodies)}drawBody(t){this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.ctx.arc(t.position.x,t.position.y,2,0,2*Math.PI),this.ctx.fill()}}customElements.define("n-body-simulation",p);document.querySelector("#app").innerHTML=`
<app-bar class="mb-3"></app-bar>
<main class="p-3">
  <n-body-simulation></n-body-simulation>
</main>
`;
