(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();class d extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){this.innerHTML=`
    <nav class="shadow-md bg-blue-500 p-4 text-white d-flex justify-content-between font-bold ${this.getAttribute("class")}">
      <h1 class="text-2xl">N Body 2D</h1>
    </nav>
    `}}customElements.define("app-bar",d);class o{constructor(t=0,e=0){this.x=t,this.y=e}get magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}get normalized(){return new o(this.x/this.magnitude,this.y/this.magnitude)}equals(t){return this.x==t.x&&this.y==t.y}add(t){this.x+=t.x,this.y+=t.y}distanceTo(t){const e=new o;return e.x=Math.abs(t.x-this.x),e.y=Math.abs(t.y-this.y),e.magnitude}multiplyScalar(t){this.x*=t,this.y*=t}}const h={G:66743e-15,massScale:1/1e15};function c(a=0,t=1){return Math.random()*(t-a)+a}function l(a){return h.massScale*a}class u{constructor(t){this.position=t!=null?t:new o,this.velocity=new o,this.mass=l(5972e21)}move(t=[]){this.position.add(this.velocity),this.potentialEnergy=0,t.forEach(e=>{if(this.position.equals(e.position)||this.position.distanceTo(e.position)<5)return;const n=this.position.distanceTo(e.position),s=new o(e.position.x-this.position.x,e.position.y-this.position.y).normalized,i=h.G*e.mass/(n*n);s.multiplyScalar(i),this.velocity.add(s)})}}class m extends HTMLElement{constructor(){super();const t=document.createElement("div");t.setAttribute("class","border border-slate-300 rounded p-4 m-5 max-w-md mx-auto"),this.canvas=document.createElement("canvas"),this.canvas.setAttribute("class","border mx-auto"),this.canvas.width=350,this.canvas.height=350,this.ctx=this.canvas.getContext("2d"),t.appendChild(this.canvas),this.appendChild(t),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.bodies=[];for(let e=0;e<300;e++){const n=new u;n.position.x=c(0,this.canvasWidth),n.position.y=c(0,this.canvasHeight),n.mass=c(l(7347e19),l(5972e21)),this.bodies.push(n)}}connectedCallback(){this.draw()}draw(){requestAnimationFrame(()=>this.draw()),this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight);for(const t of this.bodies)this.drawBody(t),t.move(this.bodies)}drawBody(t){this.ctx.fillStyle="#ffffff",this.ctx.beginPath(),this.ctx.arc(t.position.x,t.position.y,2,0,2*Math.PI),this.ctx.fill()}}customElements.define("n-body-simulation",m);document.querySelector("#app").innerHTML=`
<app-bar class="mb-3"></app-bar>
<main class="p-3">
  <n-body-simulation></n-body-simulation>
</main>
`;
